<!DOCTYPE html>
<html>

<head>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/p5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.5.0/addons/p5.sound.min.js"></script>
	<!-- <script src="scripts/sketch.js"></script> -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.js"></script>
	<script src="https://unpkg.com/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
	<script src="https://unpkg.com/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
	<script src="https://unpkg.com/three@0.128.0/examples/js/loaders/RGBELoader.js"></script>
	<!-- <script src="microsoft.cognitiveservices.speech.sdk.bundle.js"></script> -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- <link rel="stylesheet" type="text/css" href="stylesheets/styles.css"> -->
	<link rel="stylesheet" href="stylesheets/normalize.css">
	<link rel="stylesheet" href="stylesheets/skeleton.css">
	<link rel="icon" type="image/png" href="images/icon.png">
	<title>Lifeography of Wenjun II</title>
</head>

<body class="body">
	<div class="notify">
		<div>
			<p>
				Please use a desktop or laptop browser to view this page with the best experienceðŸ˜‰
			</p>
		</div>
		<br>
		<div>
			<img src="images/wenjunii_blink.gif" width="200px">
		</div>
	</div>
	<div class="container">
		<div class="row">
			<div class="two columns left">

			</div>
			<div class="eight columns middle">
				<div class="section1">
					<br>
					<div class="title2">
						<a href="index.html" target="">Home</a> | The Dream | <a href="data.html" target="">The Data</a>
						| <a href="response.html" target="">The Response</a>
					</div>
					<br>
					<!-- <br> -->
					<div class="breakline">
					</div>
					<br>

					<div id="3d10">
						<script>
							console.log('SCRIPT LOADED');

							let mesh = null;
							let cube = null;
							let texture;

							let sketch = function (p) {
								// let r = 0;
								let randomN;
								let h, s, l, a, q, n;

								p.setup = function () {
									p.createCanvas(1000, 1000);
									p.colorMode(p.HSL);
									p.angleMode(p.DEGREES);
									addMesh();
									// addCube();
								};

								p.draw = function () {
									//   r += 0.01;
									//   p.background(0);
									//   p.noStroke();
									//   p.fill(255, 0, 0);
									//   p.ellipse(p.width / 2 + 100 * p.cos(r), p.height / 2 + 100 * p.sin(r), 50, 50);
									p.loadJSON(
										"https://random-data-api.com/api/number/random_number?size=100",
										p.gotData
									);
									// console.log(randomN);
									if (randomN) {
										for (let i = 0; i < randomN.length; i++) {
											p.drawLine(i);
											p.drawArc(i);
											p.drawDot(i);
											p.drawCircle(i);
										}
									}
								};

								p.gotData = function (data) {
									console.log(data);
									randomN = data;
								}

								p.drawLine = function (i) {
									h = randomN[i].id;
									s = randomN[i].decimal;
									l = randomN[i].normal;
									a = randomN[i].non_zero_number;
									p.stroke(h / 28, s, l, a / 10);
									p.line(h / 65 + 100, s * 2 + 50, l * 2 + 100, a * 20 + 50);
								}

								p.drawCircle = function (i) {
									h = randomN[i].id;
									s = randomN[i].decimal;
									l = randomN[i].normal;
									a = randomN[i].non_zero_number;
									p.stroke(h / 28, s, l, a / 10);
									p.noFill();
									p.circle(s + 500, l + 150, h / 60);
								}

								p.drawArc = function (i) {
									h = randomN[i].id;
									s = randomN[i].decimal;
									l = randomN[i].normal;
									a = randomN[i].non_zero_number;
									q = randomN[i].positive;
									p.noFill();
									p.stroke(h / 28, s, l, a / 10);
									p.arc(s + 300, l + 300, h / 300, a * 20, 0, q / 10);
								}

								p.drawDot = function (i) {
									h = randomN[i].id;
									s = randomN[i].decimal;
									l = randomN[i].normal;
									a = randomN[i].non_zero_number;
									q = randomN[i].positive;
									p.noFill();
									p.stroke(h / 28, s, l, a / 10);
									p.point(h / 10, q / 10);
								}

							};

							const scene = new THREE.Scene();
							const myCamera = new THREE.OrthographicCamera(window.innerWidth / - 3, window.innerWidth / 3, window.innerHeight / 3, window.innerHeight / - 3, 0.001, 2000);
							myCamera.position.set(0, 0, 100);
							// myCamera.zoom = 10;
							const renderer = new THREE.WebGLRenderer({ alpha: true });
							renderer.setSize(window.innerWidth, window.innerHeight);
							renderer.setClearColor(0xcccccc);
							renderer.setPixelRatio(3);
							document.getElementById('3d10').appendChild(renderer.domElement);

							scene.background = new THREE.Color('rgb(25, 25, 25)');

							const loader = new THREE.GLTFLoader();

							const controls = new THREE.OrbitControls(myCamera, renderer.domElement);

							controls.target = new THREE.Vector3(0, 0, 0);


							loader.load('models/wenjuniinew.glb', function (gltf) {
								// gltf.scene.traverse(child => {
								// 	if (child.material) child.material.metalness = 0;
								// });

								// gltf.scene.traverse((object) => {
								// 	const encoding = THREE.sRGBEncoding;
								// 	if (object.isMesh) {
								// 		const material = object.material;
								// 		if (material.map) material.map.encoding = encoding;
								// 		if (material.emissiveMap) material.emissiveMap.encoding = encoding;
								// 		if (material.map || material.emissiveMap) material.needsUpdate = true;

								// 		console.log(object.material);
								// 	}
								// });

								gltf.scene.traverse(function (object) { object.frustumCulled = false; });


								scene.add(gltf.scene);
								scene.position.set(0, 0, 0);
								gltf.scene.position.set(0, 0, 0);
								gltf.scene.scale.set(10, 10, 10);
								addLights();
								console.log('GLTF LOAD');
							}, undefined, function (error) {
								console.log('GLTF ERROR');
								console.error(error);
							});

							function addLights() {
								console.log('LIGHTS')
								const hemiLight = new THREE.HemisphereLight(0xffffff, 0xffffff, 0.3);
								scene.add(hemiLight);
								const intensity = 1;
								const light = new THREE.AmbientLight(0xffffff, 0.1);
								scene.add(light);
								const light2 = new THREE.DirectionalLight(0xffffff, 1.5);
								light2.position.set(10, 10, 10); // ~60Âº
								light2.name = 'main_light';
								scene.add(light2);
							}

							let myp5 = new p5(sketch);
							setTimeout(() => {
								if (myp5.canvas) {
									myp5.canvas.style.display = 'none';
								}
							}, 1000);

							function addMesh() {
								texture = new THREE.Texture();
								texture.image = myp5.canvas;
								texture.needsUpdate = true;
								let material = new THREE.MeshBasicMaterial({ map: texture });
								let geometry = new THREE.PlaneGeometry(800, 800);
								mesh = new THREE.Mesh(geometry, material);
								scene.add(mesh);
								mesh.position.set(0, 0, -100);
								animate();
							}

							// function addCube() {
							// 	texture = new THREE.Texture();
							// 	texture.image = myp5.canvas;
							// 	texture.needsUpdate = true;
							// 	let material = new THREE.MeshBasicMaterial({ map: texture });
							// 	let geometry = new THREE.BoxGeometry(500, 500, 500);
							// 	cube = new THREE.Mesh(geometry, material);
							// 	scene.add(cube);
							// 	cube.position.z = -80;
							// 	cube.position.y = -100;
							// 	cube.position.x = 30;
							// 	animate();
							// }

							function animate() {
								requestAnimationFrame(animate);
								controls.update();
								renderer.render(scene, myCamera);
								texture.needsUpdate = true;
							};
						</script>
					</div>
					<!--  -->
					<br>
					<br>
					<br>
				</div>
			</div>
			<div class="two columns right">

			</div>
		</div>
	</div>
	<div class="containermanu">
		<div class="row">
			<div class="two columns left">
				<div class="keywordtable2">
					Keywords
				</div>
			</div>
			<div class="eight columns middle">
				<br>
				<br><br><br>
				<br>
				<br><br><br>
				<div class="title2">
					<a href="index.html" target="">Home</a> | The Dream | <a href="data.html" target="">The Data</a> |
					<a href="response.html" target="">The Response</a>
				</div>
				<br>

			</div>
			<div class="two columns right">
				<!-- <div class="keywordtable">
					Keywords
				</div> -->
			</div>

		</div>
	</div>
</body>

</html>